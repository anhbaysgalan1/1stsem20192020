<template> <div class="ui container"> <table class="ui left aligned single fixed line table"> <thead> <tr> <th colspan="9"> <h2 class="ui header left aligned"><i class="chart pie icon"></i>Admins</h2> </th> </tr><tr> <th colspan='7'><!-- <div class="ui search"> <div class="ui icon input"> <input class="prompt" type="text" placeholder="Search admins..."> <i class="search icon"></i> </div></div>--> </th> <th colspan="2"> <button @click="addAdmin()" class="ui primary fluid button">Add Admin</button> </th> </tr><tr> <th>First Name</th> <th>Last Name</th> <th colspan="2">Email</th> <th>Contact</th> <th>Position</th> <th>Date Created</th> <th>Date Updated</th> <th></th> </tr></thead> <tbody> <tr :key="admin.email" v-for="admin in admins"> <td>{{admin.fname}}</td><td>{{admin.lname}}</td><td colspan="2">{{admin.email}}</td><td>{{admin.contact_number}}</td><td>{{admin.position}}</td><td>{{timeStampSet(admin.date_created.seconds)}}</td><td>{{timeStampSet(admin.date_updated.seconds)}}</td><td> <button class="ui primary button" @click="modifyAdmin(admin.email)">EDIT</button> </td></tr><tr><loader v-if="loaded===false" :colspanLength="colspanLength"/></tr><tr><loader v-if="loaded===false" :colspanLength="colspanLength"/></tr><tr><loader v-if="loaded===false" :colspanLength="colspanLength"/></tr><tr><loader v-if="loaded===false" :colspanLength="colspanLength"/></tr><tr><loader v-if="loaded===false" :colspanLength="colspanLength"/></tr><tr><loader v-if="loaded===false" :colspanLength="colspanLength"/></tr><tr><loader v-if="loaded===false" :colspanLength="colspanLength"/></tr><tr><loader v-if="loaded===false" :colspanLength="colspanLength"/></tr><tr v-if="loaded===true && (admins.length < 1 || admins===undefined)"> <td :colspan="colspanLength" style="text-align: center"> <h2>There are no admins in the database</h2> </td></tr></tbody> </table> <addAdmin></addAdmin> <modifyAdmin :admin="modifyAdminData" :loading="modifyAdminLoading" :creds="modifyAdminCred"></modifyAdmin> </div></template><script>import addAdmin from '@/Component/Modals/AddAdmin'import modifyAdmin from '@/Component/Modals/ModifyAdmin'import loader from '@/Component/TablePlaceholder'import{timeStampset}from '@/utils/dateConverter.js'import $ from 'jquery';window.$=window.jQuery=$;export default{components:{addAdmin, loader, modifyAdmin}, data(){return{colspanLength: 9, loaded: false, admins: [], modifyAdminData:{}, modifyAdminLoading: false, modifyAdminCred: []}}, methods:{timeStampSet(getDate){return timeStampset(getDate)}, modifyAdmin(value){var $this=this this.modifyAdminLoading=true this.$db.collection('admin') .where('email','==',value) .get() .then(function(querySnapshot){querySnapshot.forEach(function(doc){$this.modifyAdminData=doc.data() $this.modifyAdminCred={email: doc.data().email, password: doc.data().password}}) $this.modifyAdminLoading=false}) $('.ui.modal') .modal({allowMultiple: false, closable: false,}) $('#modifyAdminModal') .modal('setting','transition','fade up') .modal('show')}, loadUsers(){var $this=this this.$db.collection("admin") .where('status','==','active') .onSnapshot(function(querySnapshot){$this.admins=[] querySnapshot.forEach(function(doc){$this.admins.push(doc.data())}) $this.loaded=true})}, addAdmin(){$('.ui.modal') .modal({allowMultiple: false, blurring: true, closable: false,}) $('#adminModal') .modal('setting','transition','fade up') .modal('show')}, checkAdminType(){}}, mounted(){this.loadUsers() document.title='BTS | Admins'; this.checkAdminType()},}</script>
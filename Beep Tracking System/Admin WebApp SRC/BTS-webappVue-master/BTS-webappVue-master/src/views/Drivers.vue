<template> <div class="ui container"> <table class="ui left aligned single fixed line table"> <thead> <tr> <th colspan="7"> <h2 class="ui header left aligned"><i class="chart pie icon"></i>Driver</h2> </th> </tr><tr> <th colspan='6'><!-- <div class="ui search"> <div class="ui icon input"> <input class="prompt" type="text" placeholder="Search drivers..."> <i class="search icon"></i> </div></div>--> </th> <th> <button class="ui primary button" @click="addDriver()">Add Driver</button> </th> </tr><tr> <th>First Name</th> <th>Last Name</th> <th>License</th> <th>E-mail</th> <th>Date Created</th> <th>Date Updated</th> <th></th> </tr></thead> <tbody> <tr :key="driver.email" v-for="driver in drivers"> <td>{{driver.fname}}</td><td>{{driver.lname}}</td><td>{{driver.license_number}}</td><td colspan="">{{driver.email}}</td><td colspan="">{{timeStampSet(driver.date_created.seconds)}}</td><td colspan="">{{timeStampSet(driver.date_updated.seconds)}}</td><td> <button class="ui primary button" @click="modifyDriver(driver.email)">EDIT</button> </td></tr><tr><loader v-if="loaded===false" :colspanLength="colspanLength"/></tr><tr><loader v-if="loaded===false" :colspanLength="colspanLength"/></tr><tr><loader v-if="loaded===false" :colspanLength="colspanLength"/></tr><tr><loader v-if="loaded===false" :colspanLength="colspanLength"/></tr><tr><loader v-if="loaded===false" :colspanLength="colspanLength"/></tr><tr><loader v-if="loaded===false" :colspanLength="colspanLength"/></tr><tr><loader v-if="loaded===false" :colspanLength="colspanLength"/></tr><tr><loader v-if="loaded===false" :colspanLength="colspanLength"/></tr><tr v-if="loaded===true && (drivers.length < 1 || drivers===undefined)"> <td :colspan="colspanLength" style="text-align: center"> <h2>There are no Beeps registered</h2> </td></tr></tbody> </table> <addDriver></addDriver> <modifyDriver :driver="modifyDriverData" :loading="modifyDriverLoading" :creds="modifyDriverCred"/> </div></template><script>import{timeStampset}from '@/utils/dateConverter.js'import addDriver from '../Component/Modals/AddDriver'import modifyDriver from '@/Component/Modals/ModifyDriver'import loader from '@/Component/TablePlaceholder'import $ from 'jquery';window.$=window.jQuery=$;export default{components:{addDriver, loader, modifyDriver}, data: function(){return{colspanLength: 7, drivers: [], user_id: '', loaded: false, modifyDriverLoading: false, modifyDriverData:{}, modifyDriverCred: []}}, methods:{modifyDriver(value){var $this=this this.modifyDriverLoading=true this.$db.collection('driver') .where('email','==',value) .get() .then(function(querySnapshot){querySnapshot.forEach(function(doc){$this.modifyDriverData=doc.data() $this.modifyDriverCred={email: doc.data().email, password: doc.data().password}}) $this.modifyDriverLoading=false}) $('.ui.modal') .modal({allowMultiple: false, closable: false,}) $('#modifyDriverModal') .modal('setting','transition','fade up') .modal('show')}, timeStampSet(getDate){return timeStampset(getDate)}, loadUsers(){var $this=this this.$db.collection("driver") .where('status','==','active') .onSnapshot(function(querySnapshot){$this.drivers=[] querySnapshot.forEach(function(doc){$this.drivers.push(doc.data())}) $this.loaded=true})}, addDriver(){$('.ui.modal') .modal({allowMultiple: false, closable: false,}) $('#driverModal') .modal('setting','transition','fade up') .modal('show')},}, mounted(){this.loadUsers(); document.title='BTS | Drivers';},}</script>
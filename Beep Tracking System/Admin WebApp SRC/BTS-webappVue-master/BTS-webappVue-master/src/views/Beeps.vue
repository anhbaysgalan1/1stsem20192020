<template> <div class="ui container"> <table class="ui left aligned single fixed line table"> <thead> <tr> <th colspan="8"> <h2 class="ui header left aligned"><i class="chart pie icon"></i>Beeps</h2> </th> </tr><tr> <th colspan='7'></th> <th colspan='1'> <button class="ui primary button" @click="addBeep()">Add Beep</button> </th> </tr><tr> <th>Beep ID</th> <th>Plate Number</th> <th>Model</th> <th>Route</th> <th>Status</th> <th>Date Created</th> <th>Date Updated</th> <th></th> </tr></thead> <tbody> <tr :key="beep.beepid" v-for="beep in buses" > <td>{{beep.beepid}}</td><td>{{beep.plate_number}}</td><td>{{beep.model}}</td><td>{{beep.route}}</td><td>{{beep.status}}</td><td>{{timeStampSet(beep.date_created.seconds)}}</td><td>{{timeStampSet(beep.date_updated.seconds)}}</td><td> <button class="ui primary button" @click="modifyBeep(beep.beepid)">EDIT</button> </td></tr><tr><loader v-if="loaded===false" :colspanLength="colspanLength"/></tr><tr><loader v-if="loaded===false" :colspanLength="colspanLength"/></tr><tr><loader v-if="loaded===false" :colspanLength="colspanLength"/></tr><tr><loader v-if="loaded===false" :colspanLength="colspanLength"/></tr><tr><loader v-if="loaded===false" :colspanLength="colspanLength"/></tr><tr><loader v-if="loaded===false" :colspanLength="colspanLength"/></tr><tr><loader v-if="loaded===false" :colspanLength="colspanLength"/></tr><tr><loader v-if="loaded===false" :colspanLength="colspanLength"/></tr><tr v-if="loaded===true && (buses.length < 1 || buses===undefined)"> <td :colspan="colspanLength" style="text-align: center"> <h2>There are no Beeps registered</h2> </td></tr></tbody> </table> <AddBeep></AddBeep> <ModifyBeep :beepID="modifyBeepData" :loading="modifyBeepLoading"></ModifyBeep> </div></template><script>import AddBeep from '@/Component/Modals/AddBeep'import loader from '@/Component/TablePlaceholder'import ModifyBeep from '../Component/Modals/ModifyBeep'import{timeStampset}from '@/utils/dateConverter.js'import $ from 'jquery';window.$=window.jQuery=$;export default{components:{AddBeep, loader, ModifyBeep,}, data: function(){return{colspanLength: 8, loaded: false, error: '', buses: [], modifyBeepData:{}, modifyBeepLoading: false}}, computed:{}, methods:{timeStampSet(getDate){return timeStampset(getDate)}, modifyBeep(beepID){var $this=this this.$db.collection('busUnit') .doc(beepID) .get() .then(function(doc){$this.modifyBeepData=doc.data()}) $this.modifyBeepLoading=false $('.ui.modal') .modal({allowMultiple: false, closable: false,}) $('#modifyBeepModal') .modal('setting','transition','fade up') .modal('show')}, loadBuses(){var $this=this this.$db.collection("busUnit") .where('status','<=','Running') .where('status','>=','Garage') .onSnapshot(function(querySnapshot){$this.buses=[] querySnapshot.forEach(function(doc){$this.buses.push(doc.data())}) $this.loaded=true})}, addBeep(){$('.ui.modal') .modal({allowMultiple: false, closable: false,}) $('#beepModal') .modal('setting','transition','fade up') .modal('show')},}, mounted(){this.loadBuses(); document.title='BTS | Beep Units';},}</script><style scoped></style>
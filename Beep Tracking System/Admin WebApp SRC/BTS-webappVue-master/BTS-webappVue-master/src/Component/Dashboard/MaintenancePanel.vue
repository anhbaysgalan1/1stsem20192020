<template> <div class="ui segment" style="height: 570px; max-height: 570px; overflow-y: auto"> <h1 class="header"><i class="wrench icon"></i> NEEDS MAINTENANCE</h1> <table class="ui red selectable small striped table" id="reports"> <thead> <tr> <th :colspan="(choice.header==='maintenance')?'4':'4'"></th> <th> <div class="ui right floated buttons"> <button class="ui button" @click="choiceMaintenance()">Maintenance</button> <div class="or"></div><button class="ui button" @click="choiceRequest()">Request</button> </div></th> </tr></thead> <thead> <tr v-if="choice.header=='maintenance'"> <th>Beep ID</th> <th>Description</th> <th>Reported by</th> <th>Status</th> <th>Date Issued</th> </tr><tr v-if="choice.header=='request'"> <th>Name</th> <th>Request For</th> <th>Date Issued</th> <th>Phone Number</th> <th></th> </tr></thead> <tbody v-if="choice.header=='maintenance'"> <tr :key="maintenance.index" v-for="maintenance in maintenance"> <td>{{maintenance.BeepID}}</td><td>{{maintenance.description}}</td><td>{{maintenance.driver_name}}</td><td>{{maintenance.status}}</td><td>{{timeStampSet(maintenance.date_issued.seconds)}}</td></tr></tbody> <tbody v-if="choice.header=='request'"> <tr :key="reqPrem.index" v-for="reqPrem in requestPrem"> <td>{{reqPrem.name}}</td><td>{{reqPrem.request}}</td><td>{{reqPrem.phone_number}}</td><td>{{timeStampSet(reqPrem.date.seconds)}}</td><td><button class="ui primary button" @click="clickRequest(reqPrem.request,reqPrem.uid)">Answer Request</button></td></tr><tr :key="reqVip.index" v-for="reqVip in requestVip"> <td>{{reqVip.name}}</td><td>{{reqVip.request}}</td><td>{{reqVip.phone_number}}</td><td>{{timeStampSet(reqVip.date.seconds)}}</td><td><button class="ui primary button" @click="clickRequest(reqVip.request,reqVip.uid)">Answer Request</button></td></tr></tbody> </table> <modifyType :Request="userChoice" :uid="userID"/> </div></template><script>import modifyType from '@/Component/Modals/ModifyCommuter'import{timeStampset}from '@/utils/dateConverter.js'import $ from 'jquery';window.$=window.jQuery=$;export default{components:{modifyType}, data: function(){return{choice:{header: 'maintenance'}, requestPrem: [], requestVip: [], maintenance: [], userChoice: '', userID: '',}}, methods:{clickRequest(choice,user){this.userChoice=choice this.userID=user $('#modifyCommuterModal').modal('show')}, choiceMaintenance(){this.choice.header='maintenance'}, choiceRequest(){this.choice.header='request' this.requestPanel()}, requestPanel(){var $this=this this.$db.collection('requestPremium') .where('status','==','1') .onSnapshot(function(querySnapshot){$this.requestPrem=[] querySnapshot.forEach(function(doc){$this.requestPrem.push({uid: doc.data().uid, date: doc.data().date, name: doc.data().name, phone_number: doc.data().phone_number, request: 'Premium'})})}) this.$db.collection('requestVIP') .where('status','==','1') .onSnapshot(function(querySnapshot){$this.requestVip=[] querySnapshot.forEach(function(doc){$this.requestVip.push({uid: doc.data().uid, date: doc.data().date, name: doc.data().name, phone_number: doc.data().phone_number, request: 'Vip'})})})}, maintenancePanel(){var $this=this this.$db.collection('maintenance') .onSnapshot(function(querySnapshot){$this.maintenance=[] querySnapshot.forEach(function(doc){$this.maintenance.push(doc.data())})})}, timeStampSet(getDate){return timeStampset(getDate)},}, mounted(){this.maintenancePanel()}}</script>
<template> <div> <div class="ui white segment" style="height: 570px; max-height:570px; overflow-y: auto"> <h1 class="header"><i class="bullhorn icon"></i> COMPLAINTS</h1> <table class="ui red selectable small striped table" id="reports"> <thead> <tr> <th colspan="3"></th> <th> <div class="ui right floated buttons"> <button @click="driverButton()" :class="{'active':choice.DriverStatus}" class="ui button">Drivers</button> <div class="or"></div><button @click="facilitiesButton()" :class="{'active':choice.UnitStatus}" class="ui button">Facilities</button> </div></th> </tr></thead> <thead> <tr> <th>Beep ID</th> <th>Description</th> <th>Reported by</th> <th>Date Issued</th> </tr></thead> <tbody v-if="choice.header=='drivers'"> <tr :key="complaint.complaintID" v-for="complaint in complaints"> <td>{{complaint.beepID}}</td><td>{{complaint.description}}</td><td>{{complaint.reported_by}}</td><td>{{timeStampSet(complaint.date_issued.seconds)}}</td></tr></tbody> <tbody v-if="choice.header=='facilities'"> <tr :key="complaint.complaintID" v-for="complaint in complaints"> <td>{{complaint.beepID}}</td><td>{{complaint.description}}</td><td>{{complaint.reported_by}}</td><td>{{timeStampSet(complaint.date_issued.seconds)}}</td></tr></tbody> </table> </div></div></template><style scoped> .ui.table{list-style-type:none;}.item{display: inline;}</style><script>import{timeStampset}from '@/utils/dateConverter.js'export default{components:{}, data: function(){return{loading: false, choice:{header: 'drivers', DriverStatus: false, UnitStatus: true}, complaints: [],}}, methods:{driverButton(){this.choice.header='drivers' this.choice.DriverStatus=true this.choice.UnitStatus=false var $this=this this.$db.collection('complaints') .where('type','==','driver') .onSnapshot(function(querySnapshot){$this.complaints=[] querySnapshot.forEach(function(doc){$this.complaints.push(doc.data())})})}, facilitiesButton(){this.choice.header='facilities' this.choice.DriverStatus=false this.choice.UnitStatus=true var $this=this this.$db.collection('complaints') .where('type','==','facility') .onSnapshot(function(querySnapshot){$this.complaints=[] querySnapshot.forEach(function(doc){$this.complaints.push(doc.data())})})}, timeStampSet(getDate){return timeStampset(getDate)}}, mounted(){this.driverButton();}}</script>